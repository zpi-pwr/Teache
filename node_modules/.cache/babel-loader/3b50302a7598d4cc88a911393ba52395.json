{"ast":null,"code":"import _classCallCheck from \"/home/przemek/Data/Programowanie/PWr/ZPI/Teache/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/przemek/Data/Programowanie/PWr/ZPI/Teache/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/przemek/Data/Programowanie/PWr/ZPI/Teache/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/przemek/Data/Programowanie/PWr/ZPI/Teache/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/przemek/Data/Programowanie/PWr/ZPI/Teache/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/przemek/Data/Programowanie/PWr/ZPI/Teache/src/components/AdvertsComponent.js\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport \"../styles/AdvertsComponent.scss\";\nimport Photo from \"../assets/photo.png\";\nimport File from \"../assets/file.png\";\nimport Send from \"../assets/send.png\";\nimport AdvertListItem from \"./AdvertListItem\";\n\nvar AdvertsComponent =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(AdvertsComponent, _Component);\n\n  function AdvertsComponent(props) {\n    var _this;\n\n    _classCallCheck(this, AdvertsComponent);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AdvertsComponent).call(this, props));\n\n    _this.searchForAdverts = function () {\n      console.log(_this.state.inputMessage);\n      var searchString = _this.state.inputMessage;\n      searchString !== '' ? fetch(\"http://localhost:8080/api/advert/browse?limit=10&titleContains=\".concat(searchString), {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }).then(function (response) {\n        return response.json();\n      }).then(function (data) {\n        _this.setState({\n          adverts: data.content,\n          idActiveAdvert: data.content ? data.content[0].id : undefined\n        });\n\n        console.log(data);\n      }) : fetch(\"http://localhost:8080/api/advert/browse\", {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }).then(function (response) {\n        return response.json();\n      }).then(function (data) {\n        _this.setState({\n          adverts: data.content,\n          idActiveAdvert: data.content ? data.content[0].id : undefined\n        });\n\n        console.log(data);\n      });\n    };\n\n    _this.onKeyPress = function (event) {\n      if (event.key === 'Enter') {\n        _this.searchForAdverts();\n      }\n    };\n\n    _this.onChoseAdvert = function (id) {\n      _this.setState({\n        idActiveAdvert: id\n      });\n\n      console.log(\"You chose advert \".concat(_this.state.adverts.find(function (element) {\n        return element.id === id;\n      }).title));\n    };\n\n    _this.onInputChange = function (event) {\n      var value = event.target.value;\n\n      _this.setState({\n        inputMessage: value\n      });\n    };\n\n    var adverts = _this.props.adverts;\n    _this.state = {\n      inputMessage: '',\n      adverts: adverts,\n      idActiveAdvert: undefined\n    };\n    return _this;\n  }\n\n  _createClass(AdvertsComponent, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var adverts = this.state.adverts.map(function (adv) {\n        return React.createElement(AdvertListItem, {\n          item: adv,\n          onClick: _this2.onChoseAdvert,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 73\n          },\n          __self: this\n        });\n      });\n      return React.createElement(\"div\", {\n        className: \"adv\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"searchbar\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        value: this.state.inputMessage,\n        type: \"text\",\n        onChange: function onChange(event) {\n          return _this2.onInputChange(event);\n        },\n        onKeyPress: function onKeyPress(event) {\n          return _this2.onKeyPress(event);\n        },\n        className: \"form-control\",\n        placeholder: \"Search here... \\uD83D\\uDD0E\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"searchResults\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, adverts), React.createElement(\"div\", {\n        className: \"advDetails\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, \"details\"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, this.state.idActiveAdvert ? this.state.adverts.find(function (element) {\n        return element.id === _this2.state.idActiveAdvert;\n      }).title : this.searchForAdverts())));\n    }\n  }]);\n\n  return AdvertsComponent;\n}(Component);\n\nfunction mapStateToProps(state) {\n  var adverts = state.advertReducer.adverts;\n  return {\n    adverts: adverts\n  };\n}\n\nexport default AdvertsComponent = connect(mapStateToProps)(AdvertsComponent);","map":{"version":3,"sources":["/home/przemek/Data/Programowanie/PWr/ZPI/Teache/src/components/AdvertsComponent.js"],"names":["React","Component","connect","Photo","File","Send","AdvertListItem","AdvertsComponent","props","searchForAdverts","console","log","state","inputMessage","searchString","fetch","method","headers","then","response","json","data","setState","adverts","content","idActiveAdvert","id","undefined","onKeyPress","event","key","onChoseAdvert","find","element","title","onInputChange","value","target","map","adv","mapStateToProps","advertReducer"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\"\nimport {connect} from \"react-redux\";\nimport \"../styles/AdvertsComponent.scss\"\nimport Photo from \"../assets/photo.png\";\nimport File from \"../assets/file.png\";\nimport Send from \"../assets/send.png\";\nimport AdvertListItem from \"./AdvertListItem\";\n\nclass AdvertsComponent extends Component {\n\n    constructor(props) {\n        super(props);\n        const {adverts} = this.props;\n        this.state = {\n            inputMessage: '',\n            adverts: adverts,\n            idActiveAdvert: undefined,\n        };\n    }\n\n    searchForAdverts = () => {\n        console.log(this.state.inputMessage);\n        const searchString = this.state.inputMessage;\n        searchString !== '' ? fetch(`http://localhost:8080/api/advert/browse?limit=10&titleContains=${searchString}`, {\n                method: 'GET',\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n            }).then((response) => {\n                return response.json();\n            }).then((data) => {\n                this.setState({\n                    adverts: data.content,\n                    idActiveAdvert: data.content ? data.content[0].id : undefined\n                });\n                console.log(data);\n            })\n            : fetch(`http://localhost:8080/api/advert/browse`, {\n                method: 'GET',\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n            }).then((response) => {\n                return response.json();\n            }).then((data) => {\n                this.setState({\n                    adverts: data.content,\n                    idActiveAdvert: data.content ? data.content[0].id : undefined\n                });\n                console.log(data);\n            });\n    };\n\n    onKeyPress = (event) => {\n        if (event.key === 'Enter') {\n            this.searchForAdverts();\n        }\n    };\n\n    onChoseAdvert = (id) => {\n        this.setState({idActiveAdvert: id});\n        console.log(`You chose advert ${this.state.adverts.find(element => element.id === id).title}`)\n    };\n\n    onInputChange = (event) => {\n        const {value} = event.target;\n        this.setState({\n            inputMessage: value\n        });\n    };\n\n    render() {\n        const adverts = this.state.adverts.map(adv => <AdvertListItem item={adv} onClick={this.onChoseAdvert}/>);\n        return (\n            <div className=\"adv\">\n                {/*<div className=\"searchbar\">search</div>*/}\n                <div className='searchbar'>\n                    <input\n                        value={this.state.inputMessage}\n                        type='text'\n                        onChange={event => this.onInputChange(event)}\n                        onKeyPress={(event) => this.onKeyPress(event)}\n                        className='form-control'\n                        placeholder='Search here... 🔎'/>\n                </div>\n                <div className=\"searchResults\">{adverts}</div>\n                <div className=\"advDetails\">\n                    <div>details</div>\n                    <div>{this.state.idActiveAdvert ? this.state.adverts.find(element => element.id === this.state.idActiveAdvert).title : this.searchForAdverts()}</div>\n                </div>\n            </div>\n        )\n    }\n}\n\nfunction mapStateToProps(state) {\n    const {adverts} = state.advertReducer;\n    return {adverts};\n}\n\nexport default AdvertsComponent = connect(mapStateToProps)(AdvertsComponent);\n"]},"metadata":{},"sourceType":"module"}