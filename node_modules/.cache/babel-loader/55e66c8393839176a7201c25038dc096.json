{"ast":null,"code":"import { ACCESS_TOKEN } from \"../constraints\";\nimport Alert from \"react-s-alert\";\nimport { restConstants } from \"../constraints/restConstants\";\nexport var userService = {\n  login: login,\n  logout: logout\n};\n\nfunction login(email, password) {\n  var body = {\n    email: email,\n    password: password\n  };\n  return function (dispatch) {\n    fetch(\"http://localhost:8080/auth/login\", {\n      method: \"post\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(body)\n    }).then(function (response) {\n      console.log('UserService login: ', response); // localStorage.setItem(ACCESS_TOKEN);\n\n      dispatch(getUserInfo);\n    });\n  };\n}\n\nfunction getUserInfo() {\n  return function (dispatch) {\n    fetch('http://localhost:3000/api/user/me', {\n      method: 'get',\n      headers: {\n        \"Content-Type\": \"application/json\",\n        'Authorization': 'Bearer ' + localStorage.getItem(ACCESS_TOKEN)\n      }\n    }).then(function (response) {\n      console.log('UserService getUserInfo: ', response);\n      dispatch({\n        id: response.data.id,\n        username: response.data.name,\n        email: response.data.email\n      });\n    });\n  };\n}\n\nfunction logout() {\n  localStorage.removeItem('token');\n  localStorage.removeItem('username');\n}","map":{"version":3,"sources":["/home/przemek/Data/Programowanie/PWr/ZPI/frontend/src/service/userService.js"],"names":["ACCESS_TOKEN","Alert","restConstants","userService","login","logout","email","password","body","dispatch","fetch","method","headers","JSON","stringify","then","response","console","log","getUserInfo","localStorage","getItem","id","data","username","name","removeItem"],"mappings":"AAAA,SAAQA,YAAR,QAA2B,gBAA3B;AACA,OAAOC,KAAP,MAAkB,eAAlB;AACA,SAAQC,aAAR,QAA4B,8BAA5B;AAEA,OAAO,IAAMC,WAAW,GAAG;AACvBC,EAAAA,KAAK,EAALA,KADuB;AAEvBC,EAAAA,MAAM,EAANA;AAFuB,CAApB;;AAKP,SAASD,KAAT,CAAeE,KAAf,EAAsBC,QAAtB,EAAgC;AAC5B,MAAMC,IAAI,GAAG;AACTF,IAAAA,KAAK,EAAEA,KADE;AAETC,IAAAA,QAAQ,EAAEA;AAFD,GAAb;AAIA,SAAO,UAAAE,QAAQ,EAAI;AACfC,IAAAA,KAAK,CAAC,kCAAD,EAAqC;AACtCC,MAAAA,MAAM,EAAE,MAD8B;AAEtCC,MAAAA,OAAO,EAAE;AACL,wBAAgB;AADX,OAF6B;AAKtCJ,MAAAA,IAAI,EAAEK,IAAI,CAACC,SAAL,CAAeN,IAAf;AALgC,KAArC,CAAL,CAMGO,IANH,CAMQ,UAAAC,QAAQ,EAAI;AAChBC,MAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ,EAAmCF,QAAnC,EADgB,CAEhB;;AACAP,MAAAA,QAAQ,CAACU,WAAD,CAAR;AACH,KAVD;AAWH,GAZD;AAaH;;AAED,SAASA,WAAT,GAAuB;AACnB,SAAO,UAAAV,QAAQ,EAAI;AACfC,IAAAA,KAAK,CAAC,mCAAD,EAAsC;AACvCC,MAAAA,MAAM,EAAE,KAD+B;AAEvCC,MAAAA,OAAO,EAAE;AACL,wBAAgB,kBADX;AAEL,yBAAiB,YAAYQ,YAAY,CAACC,OAAb,CAAqBrB,YAArB;AAFxB;AAF8B,KAAtC,CAAL,CAMGe,IANH,CAMQ,UAAAC,QAAQ,EAAI;AAChBC,MAAAA,OAAO,CAACC,GAAR,CAAY,2BAAZ,EAAyCF,QAAzC;AACAP,MAAAA,QAAQ,CAAC;AACLa,QAAAA,EAAE,EAAEN,QAAQ,CAACO,IAAT,CAAcD,EADb;AAELE,QAAAA,QAAQ,EAAER,QAAQ,CAACO,IAAT,CAAcE,IAFnB;AAGLnB,QAAAA,KAAK,EAAEU,QAAQ,CAACO,IAAT,CAAcjB;AAHhB,OAAD,CAAR;AAKH,KAbD;AAcH,GAfD;AAgBH;;AAED,SAASD,MAAT,GAAkB;AACde,EAAAA,YAAY,CAACM,UAAb,CAAwB,OAAxB;AACAN,EAAAA,YAAY,CAACM,UAAb,CAAwB,UAAxB;AACH","sourcesContent":["import {ACCESS_TOKEN} from \"../constraints\";\nimport Alert from \"react-s-alert\";\nimport {restConstants} from \"../constraints/restConstants\";\n\nexport const userService = {\n    login,\n    logout\n};\n\nfunction login(email, password) {\n    const body = {\n        email: email,\n        password: password\n    };\n    return dispatch => {\n        fetch(\"http://localhost:8080/auth/login\", {\n            method: \"post\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify(body)\n        }).then(response => {\n            console.log('UserService login: ', response);\n            // localStorage.setItem(ACCESS_TOKEN);\n            dispatch(getUserInfo)\n        })\n    };\n}\n\nfunction getUserInfo() {\n    return dispatch => {\n        fetch('http://localhost:3000/api/user/me', {\n            method: 'get',\n            headers: {\n                \"Content-Type\": \"application/json\",\n                'Authorization': 'Bearer ' + localStorage.getItem(ACCESS_TOKEN)\n            }\n        }).then(response => {\n            console.log('UserService getUserInfo: ', response);\n            dispatch({\n                id: response.data.id,\n                username: response.data.name,\n                email: response.data.email\n            })\n        })\n    }\n}\n\nfunction logout() {\n    localStorage.removeItem('token');\n    localStorage.removeItem('username');\n}\n"]},"metadata":{},"sourceType":"module"}