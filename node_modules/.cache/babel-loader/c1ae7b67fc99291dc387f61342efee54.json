{"ast":null,"code":"import _classCallCheck from \"/home/przemek/Data/Programowanie/PWr/ZPI/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/przemek/Data/Programowanie/PWr/ZPI/frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/przemek/Data/Programowanie/PWr/ZPI/frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/przemek/Data/Programowanie/PWr/ZPI/frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/przemek/Data/Programowanie/PWr/ZPI/frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/przemek/Data/Programowanie/PWr/ZPI/frontend/src/components/LoginPage.js\";\nimport React, { Component } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport { ACCESS_TOKEN } from \"../constraints\";\nimport { userService } from \"../service/userService\";\nimport { connect } from \"react-redux\";\n\nvar LoginPage =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(LoginPage, _Component);\n\n  function LoginPage(props, context) {\n    var _this;\n\n    _classCallCheck(this, LoginPage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(LoginPage).call(this, props, context));\n\n    _this.login = function () {\n      var dispatch = _this.props.dispatch;\n      dispatch(userService.login(_this.state.userInfo.email, _this.state.userInfo.password));\n      console.log(\"Logged in!\");\n    };\n\n    _this.handleInput = function (event) {\n      var _event$target = event.target,\n          name = _event$target.name,\n          value = _event$target.value;\n\n      if (name === 'email') {\n        _this.setState(function (prevState) {\n          prevState.userInfo.email = value;\n          return prevState;\n        });\n      } else if (name === 'password') {\n        _this.setState(function (prevState) {\n          prevState.userInfo.password = value;\n          return prevState;\n        });\n      }\n    };\n\n    _this.state = {\n      redirectToReferer: false,\n      userInfo: {\n        email: \"\",\n        password: \"\"\n      }\n    };\n    return _this;\n  }\n\n  _createClass(LoginPage, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45\n        },\n        __self: this\n      }, this.state.redirectToReferer ? React.createElement(Redirect, {\n        to: {\n          pathname: '/index'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46\n        },\n        __self: this\n      }) : null, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47\n        },\n        __self: this\n      }, \"You must log in to view the page\"), React.createElement(\"input\", {\n        name: \"email\",\n        type: \"text\",\n        value: this.state.login,\n        onChange: function onChange(event) {\n          return _this2.handleInput(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        name: \"password\",\n        type: \"password\",\n        value: this.state.password,\n        onChange: function onChange(event) {\n          return _this2.handleInput(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        onClick: this.login,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      }, \"Log in\"), React.createElement(\"button\", {\n        onClick: function onClick() {\n          return console.log(_this2.state.userInfo);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        },\n        __self: this\n      }, \"LOG\"), React.createElement(\"button\", {\n        onClick: function onClick() {\n          return console.log(localStorage.getItem(ACCESS_TOKEN));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53\n        },\n        __self: this\n      }, \"LOG TOKEN\"), React.createElement(\"button\", {\n        onClick: function onClick() {\n          return console.log(localStorage.removeItem(ACCESS_TOKEN));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      }, \"CLEAR TOKEN\"));\n    }\n  }]);\n\n  return LoginPage;\n}(Component);\n\nexport default LoginPage = connect()(LoginPage);","map":{"version":3,"sources":["/home/przemek/Data/Programowanie/PWr/ZPI/frontend/src/components/LoginPage.js"],"names":["React","Component","Redirect","ACCESS_TOKEN","userService","connect","LoginPage","props","context","login","dispatch","state","userInfo","email","password","console","log","handleInput","event","target","name","value","setState","prevState","redirectToReferer","pathname","localStorage","getItem","removeItem"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\"\nimport {Redirect} from \"react-router-dom\";\nimport {ACCESS_TOKEN} from \"../constraints\";\nimport {userService} from \"../service/userService\";\nimport {connect} from \"react-redux\";\n\nclass LoginPage extends Component {\n\n    constructor(props, context) {\n        super(props, context);\n        this.state = {\n            redirectToReferer: false,\n            userInfo: {\n                email: \"\",\n                password: \"\",\n            }\n        }\n    }\n\n    login = () => {\n        const {dispatch } = this.props;\n        dispatch(userService.login(this.state.userInfo.email, this.state.userInfo.password));\n        console.log(\"Logged in!\");\n    };\n\n    handleInput = (event) => {\n\n        const {name, value} = event.target;\n        if (name === 'email'){\n            this.setState(prevState => {\n                prevState.userInfo.email = value;\n            return prevState\n            });\n        } else if (name === 'password'){\n            this.setState(prevState => {\n                prevState.userInfo.password = value;\n                return prevState\n            });\n        }\n    };\n\n    render() {\n\n        return (\n            <div>\n                {this.state.redirectToReferer? <Redirect to={{pathname: '/index'}}/> : null}\n                <p>You must log in to view the page</p>\n\n                <input name='email' type='text' value={this.state.login} onChange={event => this.handleInput(event)}/>\n                <input name='password' type='password' value={this.state.password} onChange={event => this.handleInput(event)}/>\n                <button onClick={this.login}>Log in</button>\n                <button onClick={() => console.log(this.state.userInfo)}>LOG</button>\n                <button onClick={() => console.log(localStorage.getItem(ACCESS_TOKEN))}>LOG TOKEN</button>\n                <button onClick={() => console.log(localStorage.removeItem(ACCESS_TOKEN))}>CLEAR TOKEN</button>\n            </div>\n        )\n    }\n}\n\n\n\nexport default LoginPage = connect()(LoginPage);\n"]},"metadata":{},"sourceType":"module"}